<!DOCTYPE html>
<html>
<head>
    <title>Advent of Code Experiment Results</title>
    <style>
        table {
          border-collapse: collapse;
          width: 50%;
        }
        
        th, td {
          text-align: left;
          padding: 8px;
        }
        
        tr:nth-child(even) {background-color: #f2f2f2;}

        .container {
            display: flex;
            gap: 20px;
        }
    </style>
</head>
<body>
    <h1>Advent of Code Experiment Results</h1>

    <h2>Current Status</h2>
    {% if current_status %}
        <p>
            <b>Last Experiment:</b><br>
            Model Family: {{ current_status.model_family }}<br>
            Model Name: {{ current_status.model_name }}<br>
            Puzzle: {{ current_status.year }}/{{ current_status.day }}/{{ current_status.part }}<br>
            Status: {{ current_status.status }}<br>
            Timestamp: {{ current_status.timestamp }}<br>
            {% if current_status.timeout %}
                Quota Timeout: {{ current_status.timeout }}
            {% endif %}
        </p>
    {% else %}
        <p>No experiments run yet.</p>
    {% endif %}

    <h2>Experiment Summary</h2>
    <p>
        Total Experiments: {{ total_experiments }}<br>
        Solved Experiments: {{ solved_experiments }}<br>
        Timed-out Experiments: {{ timedout_experiments }}
    </p>

    <h2>Model Family Rankings</h2>
    <table>
        <thead>
            <tr>
                <th>Model Family</th>
                <th>Average Correctness</th>
            </tr>
        </thead>
        <tbody>
            {% for row in model_family_rankings %}
            <tr>
                <td>{{ row.model_family }}</td>
                <td>{{ row.avg_correct|round(2) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <h2>Model Rankings (by Family)</h2>
    <div class="container">
        {% for family, models in model_rankings.items() %}
        <div>
        <h3>{{ family }}</h3>
        <table>
            <thead>
                <tr>
                    <th>Model Name</th>
                    <th>Average Correctness</th>
                </tr>
            </thead>
            <tbody>
                {% for model in models %}
                <tr>
                    <td>{{ model.model_name }}</td>
                    <td>{{ model.avg_correct|round(2) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>
        {% endfor %}
    </div>

    <h2>Puzzle Year Rankings (Easiest to Hardest)</h2>
    <table>
        <thead>
            <tr>
                <th>Year</th>
                <th>Average Correctness</th>
            </tr>
        </thead>
        <tbody>
            {% for row in year_rankings %}
            <tr>
                <td>{{ row.year }}</td>
                <td>{{ row.avg_correct|round(2) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Delete Experiments</h2>
    <form action="/delete" method="post">
        <label for="experiment_id">Experiment ID:</label>
        <input type="number" name="experiment_id" id="experiment_id"><br><br>

        <label for="model_family">Model Family:</label>
        <input type="text" name="model_family" id="model_family"><br><br>

        <label for="model_name">Model Name:</label>
        <input type="text" name="model_name" id="model_name"><br><br>
        
        <label for="year">Year:</label>
        <input type="number" name="year" id="year"><br><br>

        <button type="submit">Delete</button>
    </form>
    
    <a href="/experiments">View All Experiments</a>

</body>
</html>
